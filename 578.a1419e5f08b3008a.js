"use strict";(self.webpackChunkfazenda_peixe_azul_app=self.webpackChunkfazenda_peixe_azul_app||[]).push([[578],{7578:(M,l,o)=>{o.r(l),o.d(l,{DashboardModule:()=>O});var r=o(177),g=o(4032),p=o(7468),d=o(7673),c=o(9437),t=o(540),u=o(3508),m=o(4467),h=o(1482);function f(n,a){1&n&&(t.j41(0,"div",4),t.nrm(1,"div",5),t.j41(2,"p"),t.EFF(3,"Carregando dados..."),t.k0s()())}function v(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",6)(1,"p"),t.EFF(2),t.k0s(),t.j41(3,"button",7),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.carregarDados())}),t.EFF(4,"Tentar novamente"),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(2),t.JRh(e.error)}}function F(n,a){1&n&&(t.j41(0,"div",20)(1,"p"),t.EFF(2,"Nenhum tanque cadastrado"),t.k0s()())}function b(n,a){if(1&n&&(t.j41(0,"li",23)(1,"span",24),t.EFF(2),t.k0s(),t.j41(3,"span",25)(4,"span",26),t.EFF(5),t.k0s(),t.j41(6,"span",27),t.EFF(7),t.k0s()()()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(e.nome),t.R7$(3),t.JRh(e.especieCultura),t.R7$(2),t.SpI("",e.capacidade," m\xb3")}}function C(n,a){if(1&n&&(t.j41(0,"ul",21),t.DNE(1,b,8,3,"li",22),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.tanques)}}function _(n,a){1&n&&(t.j41(0,"div",20)(1,"p"),t.EFF(2,"Nenhum registro dispon\xedvel"),t.k0s()())}function E(n,a){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.JRh(t.i5U(3,5,e.data,"dd/MM/yyyy")),t.R7$(3),t.JRh(e.tanque.nome),t.R7$(2),t.JRh(e.ph),t.R7$(2),t.SpI("",e.oxigenacao," mg/L"),t.R7$(2),t.SpI("",e.temperatura,"\xb0C")}}function D(n,a){if(1&n&&(t.j41(0,"table",28)(1,"thead")(2,"tr")(3,"th"),t.EFF(4,"Data"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Tanque"),t.k0s(),t.j41(7,"th"),t.EFF(8,"pH"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Oxig\xeanio"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Temp."),t.k0s()()(),t.j41(13,"tbody"),t.DNE(14,E,12,8,"tr",29),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(14),t.Y8G("ngForOf",e.ultimosRegistros)}}function x(n,a){1&n&&(t.j41(0,"div",20)(1,"p"),t.EFF(2,"Dados insuficientes para gerar o gr\xe1fico"),t.k0s()())}function j(n,a){1&n&&(t.j41(0,"div",30)(1,"p"),t.EFF(2,"Gr\xe1fico de evolu\xe7\xe3o dos par\xe2metros de qualidade da \xe1gua nos \xfaltimos 7 dias"),t.k0s()())}function R(n,a){if(1&n&&(t.j41(0,"div",8)(1,"div",9)(2,"h2"),t.EFF(3,"Vis\xe3o Geral"),t.k0s(),t.j41(4,"div",10)(5,"div",11)(6,"span",12),t.EFF(7),t.k0s(),t.j41(8,"span",13),t.EFF(9,"Tanques"),t.k0s()(),t.j41(10,"div",11)(11,"span",12),t.EFF(12),t.k0s(),t.j41(13,"span",13),t.EFF(14,"Ciclos Ativos"),t.k0s()()()(),t.j41(15,"div",14)(16,"h2"),t.EFF(17,"Tanques Ativos"),t.k0s(),t.DNE(18,F,3,0,"div",15),t.DNE(19,C,2,1,"ul",16),t.k0s(),t.j41(20,"div",14)(21,"h2"),t.EFF(22,"\xdaltimos Registros de Qualidade da \xc1gua"),t.k0s(),t.DNE(23,_,3,0,"div",15),t.DNE(24,D,15,1,"table",17),t.k0s(),t.j41(25,"div",18)(26,"h2"),t.EFF(27,"Evolu\xe7\xe3o dos Par\xe2metros"),t.k0s(),t.DNE(28,x,3,0,"div",15),t.DNE(29,j,3,0,"div",19),t.k0s()()),2&n){const e=t.XpG();t.R7$(7),t.JRh(e.tanques.length),t.R7$(5),t.JRh(e.ciclosAtivos.length),t.R7$(6),t.Y8G("ngIf",0===e.tanques.length),t.R7$(1),t.Y8G("ngIf",e.tanques.length>0),t.R7$(4),t.Y8G("ngIf",0===e.ultimosRegistros.length),t.R7$(1),t.Y8G("ngIf",e.ultimosRegistros.length>0),t.R7$(4),t.Y8G("ngIf",0===e.qualidadeAguaChartData.length),t.R7$(1),t.Y8G("ngIf",e.qualidadeAguaChartData.length>0)}}const k=[{path:"",component:(()=>{class n{constructor(e,i,s){this.tanqueService=e,this.qualidadeAguaService=i,this.cicloService=s,this.tanques=[],this.ultimosRegistros=[],this.ciclosAtivos=[],this.qualidadeAguaChartData=[],this.loading=!1,this.error=""}ngOnInit(){this.carregarDados()}carregarDados(){this.loading=!0,this.error="",(0,p.p)({tanques:this.tanqueService.getTanques().pipe((0,c.W)(()=>(0,d.of)([]))),registros:this.qualidadeAguaService.getRegistros().pipe((0,c.W)(()=>(0,d.of)([]))),ciclos:this.cicloService.getCiclos().pipe((0,c.W)(()=>(0,d.of)([])))}).subscribe({next:e=>{this.tanques=e.tanques,this.ultimosRegistros=e.registros.slice(0,5),this.ciclosAtivos=e.ciclos.filter(i=>!i.dataFim),this.qualidadeAguaChartData=this.prepararDadosGrafico(e.registros),this.loading=!1},error:e=>{this.error="Erro ao carregar dados do dashboard: "+(e.message||"Erro desconhecido"),this.loading=!1}})}prepararDadosGrafico(e){return e}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(u.a),t.rXU(m.q),t.rXU(h.B))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-dashboard"]],decls:6,vars:3,consts:[[1,"dashboard-container"],["class","loading-spinner",4,"ngIf"],["class","error-message",4,"ngIf"],["class","dashboard-grid",4,"ngIf"],[1,"loading-spinner"],[1,"spinner"],[1,"error-message"],[3,"click"],[1,"dashboard-grid"],[1,"card","overview-card"],[1,"stats-container"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"card"],["class","empty-state",4,"ngIf"],["class","tanques-list",4,"ngIf"],["class","registros-table",4,"ngIf"],[1,"card","chart-card"],["class","chart-container",4,"ngIf"],[1,"empty-state"],[1,"tanques-list"],["class","tanque-item",4,"ngFor","ngForOf"],[1,"tanque-item"],[1,"tanque-nome"],[1,"tanque-info"],[1,"tanque-especie"],[1,"tanque-capacidade"],[1,"registros-table"],[4,"ngFor","ngForOf"],[1,"chart-container"]],template:function(i,s){1&i&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"Dashboard"),t.k0s(),t.DNE(3,f,4,0,"div",1),t.DNE(4,v,5,1,"div",2),t.DNE(5,R,30,8,"div",3),t.k0s()),2&i&&(t.R7$(3),t.Y8G("ngIf",s.loading),t.R7$(1),t.Y8G("ngIf",s.error),t.R7$(1),t.Y8G("ngIf",!s.loading&&!s.error))},dependencies:[r.Sq,r.bT,r.vh],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:1rem}h1[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#3f51b5}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-left-color:#3f51b5;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:1rem;border-radius:4px;margin-bottom:1rem}.error-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;margin-top:.5rem}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:1.5rem}.overview-card[_ngcontent-%COMP%]{grid-column:span 2}.stats-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:1rem}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#3f51b5}.stat-label[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:.5rem}.empty-state[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#666}.tanques-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.tanque-item[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center}.tanque-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.tanque-nome[_ngcontent-%COMP%]{font-weight:500}.tanque-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;font-size:.9rem;color:#666}.registros-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.registros-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .registros-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:left;border-bottom:1px solid #e0e0e0}.registros-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500;color:#333}.chart-card[_ngcontent-%COMP%]{grid-column:span 2}.chart-container[_ngcontent-%COMP%]{height:300px;margin-top:1rem}"]})}}return n})()}];let O=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[r.MD,g.iI.forChild(k)]})}}return n})()}}]);